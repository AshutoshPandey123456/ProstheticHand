DRIVER
  os.environ['SMA_TSO_COSMOS_ELEMAT'] = '1'
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.ste*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcd*' ], 'SAVE.ste', '' )
END_

FEM_INPUT
  ID_NAME = 157CA9A1-A261-42F5-94B9-D1A4C35C1621_1
  FILE = 157CA9A1-A261-42F5-94B9-D1A4C35C1621.NOD
END_

*SET_DB,rint,130,1

GROUP_DEF
  ID_NAME = FROZEN_AREA_ELEMS_GRP_1
  TYPE=ELEM
  FORMAT=LIST
  LIST_BEGIN
816,2481,3591,6346,6370,12530,13250,13631,14114,14121,14136,14689,15178,15301,15327,15841,
15950,16036,16077,16130,17061,17106,17327,17336,17343,17837,17869,17911,17916,17922,17927,
17933,17935,17943,17953,17957,17970,17986,17993,18003,18005,18024,19608,19617,19645,19665,
19687,19705,19708,19710,19719,19722,19726,19736,19747,19823,19862,19863,19864,19867,19876,
19882,19887,19956,19962,19971,20069,20073,20077,20080,20081,20082,20086,20097,20123,20133,
20179,20349,20363,20477,20572,20576,20620,20621,20630,20637,20776,21444,21544,21551,21565,
21575,21578,21582,21583,21596,21597,21604,21607,21614,21616,21617,21622,21626,21627,21629,
21631,21641,21642,21645,21661,21671,21680,21683,21684,21685,21693,21700,21714,21715,21719,
21728,21736,21752,21759,21761,21762,21765,21773,21774,21776,21778,21779,21780,21795,21796,
21844,21853,21865,21870,21872,21880,21893,21896,21906,21908,21913,21914,21922,21925,21933,
21939,21946,21952,22086,22144,22154,22155,22164,22247,22255,22334,22444,22451,22460,22486,
22542,22543,22548,22556,22584,22599,22608,22635,22646,22657,22662,22668,22674,22676,22683,
22684,22687,22709,22730,22748,22771,22774,22780,22790,22817,22828,22833,22849,22855,22859,
22864,22871,22888,22893,22895,22896,22900,22917,22918,22919,22920,22924,22937,22946,22952,
22953,22957,22969,22970,22971,22972,22976,22986,23010,23017,23021,23093,23095,23109,23116,
23126,23166,23262,23301,23519,23524,23528,23590,23604,23614,23773,23883,23885,23886,23920,
24026,24041,24042,24363,24467,24659,24750,25144,25195,25220,25221,25225,25242,26189,26647,
26925,26926,26929,26936,26941,26942,26943,27447,27500,27526,27657,27664,27665,27666,27670,
27920,27925,28003,28159,28278,28495,28497,28500,28508,28510,28512,28777,28789,29426,29432,
29435,29444,29572,29577,29580,29596,29602,29603,29605,29608,29619,29745,29746,29756,29881,
29885,29887,29897,29965,30052,30136,30239,30258,30260,30308,30313,30436,30835,30844,30871,
30878,31128,31133,31171,31173,31344,31353,31354,31393,31412,31917,32146,32833,32848,32891,
32899,33811,33824,33828,33829,34135,34145,34149,34150,34155,34186,34361,34571,34628,34734,
34744,34858,35053,35062,35063,35068,35208,35211,35406,35514,35517,35535,35610,36492,36497,
36560,36562,36566,36570,36572,36576,36580,36928,36931,36935,36936,37005,37219,37591,37626,
37632,37636,37771,37928,37976,37978,37980,38121,39162,39182,39259,39262,39363,39364,39812,
40104,40142,40143,40145,40246,40253,40255,40643,40647,40832,41063,41369,41373,41380,41412,
41455,41655,41907,41908,42136,42140,42263,42463,42468,42606,42609,42978,43070,43073,43076,
43078,43244,43416,43419,43428,44263,44276,44281,44317,44319,44340,44355,44356,44371,44388,
44400,44491,44501,44528,44536,44537,44557,44582,44588,44593,44601,44610,44622,44655,44658,
44674,44687,44700,44702,44705,44714,45536,45775,45835,46005,46192,46221,46222,46449,47037,
47224,47408,47672,47836,48742,48871,48914,49346,49350,49493,49703,50213,50219,50481,50485,
51043,51103,51104,51105,51107,51214,51215,51222,51474,51884,52238,52240,52946,53175,53590,
53794,53795,54919,54920,55862,56152,56260,56295,56702,56703,56860,57193,57200,58848,58853,
59458,60109,60110,60764,61082,61122,61234,61542,62159,62165,62265,62275,62685,63161,63352,
64559,64562,64935,65063,65424,65426,65428,65691,66136,66640,66641,66642,67317,67423,67836,
67850,67853,68358,69310,69311,69572,69576,69604,69615,69617,69675,69980,69985,70330,70651,
71009,71180,71209,71412,72421,72451,72456,72458,72727,73212,73982,73985,74047,74150,74178,
74179,74338,74344,74632,75624,75827,75975,75982,77351,77352,77353,77430,77431,77954,78011,
78659,79225,79231,79462,79466,79470,79960,79965,79966,79970,80146,80381,80382,80388,80554,
80847,80848,80854,80892,80901,80999,81174,81385,81442,82561,82626,83192,83220,84502,84503,
84511,84541,84564,85082,85524,85527,85535,85536,85537,85541,85556,85557,85560,85693,85729,
85739,86110,86126,86141,86174,86192,86194,86217,86260,86292,86295,86313,86319,86372,86373,
86405,86423,86432,86460,86768,87048,87333,87336,87649,87656,87848,87856,89090,89123,89200,
89418,89426,89445,89451,89462,89519,89589,89591,89666,89678,91232,91233,92168,92172,92175,
92185,92197,92220,92243,92737,92747,93193,93194,93195,93197,93644,93649,93651,94524,94543,
94544,94639,94640,95168,96020,96021,96023,96142,96149,96312,96314,96316,96479,96487,96955,
97268,97848,97910,97917,97918,97919,98016,98088,98256,99225,99415,100451,101365,103096,103432,
103436,103442,103518,103519,103525,103531,103563,103566,104197,104353,104357,104373,104412,
105413,105414,105857,106361,106494,106504,106535,106536,106966,106972,107670,107671,108222,
108252,108253,108753,108795,108796,108797,108798,108799,109782,110274,111527,111532,111727,
111730,111732,111818,111952,112221,112387,112449,112450,112959,112961,113286,113348,113442,
113443,113709,113762,113900,114037,114438,114440,114480,114488,114489,114490,114630,114668,
114986,114993,115087,115088,115236,115273,115578,115986,116045,116410,116414,116967,117183,
117197,119086,119093,119094,119173,119584,119586,119748,120128,120136,120414,120468,121192,
121507,121724,121886,121893,122286,122488,122489,123412,123716,124661,124662,124701,124702,
124719,125002,125271,125376,125378,125384,125394,126357,126358,126461,126510,126524,126584,
126585,126716,127610,127791,127792,127826,127896,127919,128133,128137,128699,128702,128704,
128717,129231,129655,129705,129711,129713,130454,130582,130614,130658,130847,130882,130911,
131061,131223,131258,132555,132558,133070,133201,133213,133225,134066,134244,134245,134579,
135245,135246,135247,135249,135250,135254,136299,136381,136384,136489,136496,136497,136499,
137320,137325,137330,137335,137340,137343,137349,138271,138564,138723,138737,138739,139465,
139761,139875,140119,140171,141076,141078,141242,141337,141669,141680,141682,141683,143883,
143884,144568,146780,147911,147976,150462,150597,150764,151645,151908,159967,160397,160460,
160490,160652,160655,160658,160661,160750,162013,163458,164929,166514,166515,166520,167290,
167294,167722,167746,167913,168301,168303,168304,168466,168475,168512,169231,169233,170399,
170875,170876,172084,172206,172210,172679,172708,172823,172922,172923,172924,172925,172956,
173004,173007,173337,174007,174176,174663,174670,175241,175271,175356,175357,175783,175789,
175798,176049,176057,176083,177796,177801,177917,178217,179160,179161,179538,179545,179685,
180462,180468,180474,180680,181487,181719,181722,181865,181867,181869,182109,182110,182232,
182246,182591,182934,182935,183316,187338,187339,187759,187878,188068,188070,188187,188793,
188800,188818,189071,189493,190459,192964,194010,194098,196443,196898,196976,197502,199058,
199186,200266,202396,202400,202401,202457,202461,202659,202664,203260,203265,203537,203546,
203788,204430,204856,205525,206072,206075,206896,207082,207083,207086,207089,207595,208396,
208397,208399,208511,208848,209336,209797,210084,210089,210090,210657,210666,211162,211454,
211681,212278,212280,212524,212526,212529,213200,213201,213205,213961,213962,214366,214543,
214616,214617,215491,215690,215694,215699,216310,216313,216320,216458,216724,216725,216726,
216853,216854,216855,216858,216897,217312,217737,217937,217938,217942,218705,218708,218712,
219660,219669,219671,219767,220993,220995,221198,221201,221203,221461,221466,221609,221615,
222242,222263,222266,222710,222765,222767,224042,224662,225376,225467,225468,225829,225833,
225916,225926,226034,226037,226213,226216,226220,227778,228104,228359,228361,228610,229650,
230466,230796,231125,231202,231427,231820,232372,232973,233174,233177,233530,234920,234931,
235920,236136,236138,236271,236361,236439,236523,236893,236898,236978,237087,237088,237103,
237322,238528,239038,239443,239448,239787,240332,240415,240671,240676,240791,241405,241410,
241634,241636,241646,241671,241717,241793,241795,241798,241836,241837,241882,242122,242208,
242209,242291,242293,242295,242463,242572,242657,242663,242722,242724,242940,242947,243012,
243025,243035,243064,243148,243244,243246,243282,243329,243331,243334,243340,243562,243624,
243625,243763,243768,243935,243943,244118,244161,244394,244398,244399,244451,244503,244639,
244646,244742,245196,245477,245560,245614,245615,245958,246127,246252,246360,246361,246873,
247004,247123,247567,249077,251981,252205,255570,255576,256526,257202,257203,261011,264960,
265312,266246,266279,266844,267231,267885,267886,267887,270654,271702,271864,275245,276480,
278111,281560,282712,284224,285187,288235,290361,291972,292413,294198,294432,295214,296049,
296860,298170,300133,302614,302792,303499,303627,303631,303775,303947
END_

! ----------------------------------------------------------------
!
! Design Response: Stiffness_Measure
!
DRESP
  ID_NAME = Stiffness_Measure
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = ENERGY_STIFF_MEASURE
  GROUP_OPER = SUM
  LC_SEL = SUM 
  LC_SET = STATIC, ALL, ALL, MAX
END_

! ----------------------------------------------------------------
!
! Design Response: Mass_DResp_1
!
DRESP
  ID_NAME = Mass_DResp_1
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = WEIGHT
  GROUP_OPER = SUM
END_

! ----------------------------------------------------------------
!
!
! Design Area: Task1_DESIGN_AREA
!
DV_TOPO
  ID_NAME = Task1_DESIGN_AREA
  EL_GROUP = ALL_ELEMENTS
END_

! ----------------------------------------------------------------
!
! Objective Function: StiffnessEnergy_Obj_Func
!
OBJ_FUNC
  ID_NAME = StiffnessEnergy_Obj_Func
  DRESP = Stiffness_Measure, 1.0
  TARGET = MIN
END_

! ----------------------------------------------------------------
!
! Constraint: Mass_Constraint_1
!
CONSTRAINT
  ID_NAME = Mass_Constraint_1
  DRESP = Mass_DResp_1
  MAGNITUDE = REL
  LE_VALUE = 0.5
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Thickness_ManufacConstraint_2
!
DVCON_TOPO
  ID_NAME = Thickness_ManufacConstraint_2
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = MIN_MEMBER
  THICKNESS = 0.002
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Frozen_ManufacConstraint_3
!
DVCON_TOPO
  ID_NAME = Frozen_ManufacConstraint_3
  EL_GROUP = FROZEN_AREA_ELEMS_GRP_1
  CHECK_TYPE = FROZEN
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Demold_ManufacConstraint_4
!
DVCON_TOPO
  ID_NAME = Demold_ManufacConstraint_4
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = CAST
  PULL_DIR = -0.080012, 0, 0
  ANGLE = 0.
  CHECK_GROUP = ALL_ELEMENTS
  MID_PLANE = AUTO
  PULL_CS = CS_0
  CREATE_PULL_GROUP = YES
END_

! ----------------------------------------------------------------
!
!
! Optimize: OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_CONTROLLER 
!
OPTIMIZE
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV = Task1_DESIGN_AREA
  OBJ_FUNC = StiffnessEnergy_Obj_Func
  DVCON = Thickness_ManufacConstraint_2
  DVCON = Frozen_ManufacConstraint_3
  DVCON = Demold_ManufacConstraint_4
  CONSTRAINT = Mass_Constraint_1
  STRATEGY = TOPO_SENSITIVITY
END_

OPT_PARAM
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY_OPT_PARAM_
  OPTIMIZE = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  AUTO_FROZEN = BOTH
  STOP_CRITERION_LEVEL = BOTH
  STOP_CRITERION_OBJ = 0.001
  STOP_CRITERION_DENSITY = 0.005
END_

STOP
  ID_NAME = Task-1_GLOBAL_STOP_CONDITION_
  ITER_MAX = 75
END_

